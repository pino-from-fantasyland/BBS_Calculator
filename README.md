# BBS Calculator (Berg Balance Scale Assessment Tool)

理学療法士・作業療法士に向けた、Berg Balance Scale (BBS) の評価・判定サポートツール。
「ITで臨床をハックする」というコンセプトのもと、院内のセキュアなオフライン環境（外部インターネット接続不可のPCやタブレット）でも、単一のHTMLファイルを置くだけで完全動作するように設計されている。

## 💡 コア機能

- **暗記不要のUI設計**
  全14項目の採点基準（0〜4点）をボタン上に完全明記。評価マニュアルを手元に置く必要がなく、画面をタップ・クリックするだけで直感的に評価が完結する。

- **評価モード別の動的ビジュアライズとカットオフ判定**
  対象者の疾患（高齢者一般、脳卒中、パーキンソン病など）を選択することで、エビデンスに基づいたカットオフ判定を自動で行う。
  - **フルパッケージ (14項目):** レーダーチャートによるバランス機能の多角的な可視化と臨床的解釈の提示。
  - **時短モード (BBS-9):** プログレスバー上に安全圏のマーカー（カットオフライン）を表示。
  - **高難易度スクリーニング:** 転倒リスクに直結する後半4項目（360度方向転換、踏み台、継ぎ足、片脚立位）のみを抽出し、自立不可（3点未満）のタスクを警告表示。

- **MDC（最小可検変化量）の自動判定エンジン**
  前回の評価点数からの差分を計算し、その変化が「日内変動や単なる測定誤差」なのか、それとも「統計学的に有意な真の改善（または悪化）」なのかを自動でジャッジする。

- **ローカルストレージによる履歴保存（完全オフライン）**
  ブラウザの内部ストレージ（`localStorage`）を利用し、患者IDごとに評価履歴を保存・呼び出し可能。外部サーバーとの通信やデータベース構築は一切不要。

## 🚀 導入と使い方（インストール不要）

外部通信やサーバー構築は不要。以下の手順で即座に稼働する。

1. このリポジトリから `bbs_calculator.html` をダウンロードする。
2. ダウンロードしたファイルを、院内のPCやタブレットのブラウザ（Chrome, Edge, Safariなど）で開く。
3. 評価を開始する。

## ⚠️ セキュリティと運用上のルール（重要）

本ツールは外部通信を一切行わないためネットワーク経由の情報漏洩リスクはないが、入力したデータは使用した端末のブラウザ内部に保存される。
医療情報を扱う観点から、**「患者ID」の入力欄には、氏名や電子カルテのIDをそのまま入力しないこと。**
必ず「A氏」「病棟名-001」のような、**個人を特定できない仮のタグ（匿名化データ）**を運用ルールとして使用すること。

## 🛠 カスタマイズ（研究者・開発者向け）

特定の疾患のカットオフ値やMDC基準値は、HTMLソースコード内の JavaScript オブジェクト (`cutoffRules`, `mdcCalculators`) としてUIから完全に分離して定義している。
新しい論文のエビデンスの発表や、自施設における臨床研究で新たな閾値が導き出された場合、このJSONデータの数値を書き換える（または配列に追記する）だけで、ツールの判定ロジックとグラフ描画が自動的にアップデートされる構造になっている。

## ⚖️ 免責事項

本ツールはあくまで臨床的評価の計算・可視化プロセスをサポートするものであり、医学的な診断を行うものではない。最終的な転倒リスクの判定、予後予測、および治療方針の決定は、本ツールの算出結果のみに依存せず、医療従事者の専門的な臨床判断に基づき行うこと。
